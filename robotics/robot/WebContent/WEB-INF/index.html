<html>
<script>
var prev = 5;
function funcpost(body1,cur){
if(prev!=cur)
{
	prev = cur;
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (xhttp.readyState == 4 && xhttp.status == 200) {
      
    }
  };
  xhttp.open("POST", "http://192.168.42.1:8080/robot/drive", true);
  xhttp.setRequestHeader("power", "10000");
  xhttp.send(body1);
  }
};
document.onkeydown = function(event) {
     if (!event)
          event = window.event;
     var code = event.keyCode;
     if (event.charCode && code == 0)
          code = event.charCode;
     switch(code) {
          case 37:
              funcpost('{"route":[{"direction":"left","rotations":"1"}]}',1);
              break;
          case 38:
             funcpost('{"route":[{"direction":"forward","rotations":"1"}]}',2);
              break;
          case 39:
              funcpost('{"route":[{"direction":"right","rotations":"1"}]}',3);
              break;
          case 40:
              funcpost('{"route":[{"direction":"back","rotations":"1"}]}',4);
              break;
     }
     event.preventDefault();
};
document.onkeyup = function(event) {
     if (!event)
          event = window.event;
     var code = event.keyCode;
     if (event.charCode && code == 0)
          code = event.charCode;
    
        funcpost('{"route":[{"direction":"forward","rotations":"0"}]}',0);
     
     event.preventDefault();
};
</script>
</html>